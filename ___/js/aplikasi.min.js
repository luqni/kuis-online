function timer(){var a=$("#_tgl_mulai").val(),t=($("#id_ujian").val(),new Date(a)),n=$("#_terlambat").val(),s=new Date(n);$("#btn_mulai").show(),$("#tbl_mulai").hide(),$("#ujian_selesai").hide(),$("#btn_mulai").countdown({until:t,format:"HMS",compact:!0,alwaysExpire:!0,onExpiry:function(){$("#btn_mulai").hide(),$("#tbl_mulai").show(),$("#ujian_selesai").hide(),$("#_terlambat").countdown({until:s,format:"HMS",compact:!0,alwaysExpire:!0,onExpiry:function(){$("#ujian_selesai").show(),$("#btn_mulai").hide(),$("#tbl_mulai").hide()}})}})}function get_url(a){var t=(window.location.protocol,window.location.host,window.location.pathname,window.location.pathname.split("/"));return t[a]}function getFormData(a){var t=a.serializeArray(),n={};return $.map(t,function(a,t){n[a.name]=a.value}),n}function pagination(a,t,n){$("#"+a).DataTable({language:{url:base_url+"___/plugin/datatables/Indonesian.json"},ordering:!1,columnDefs:n,bProcessing:!0,serverSide:!0,bDestroy:!0,ajax:{url:t,type:"post",error:function(){$("#"+a).css("display","none")}}})}function login(){event.preventDefault();var a=$("#f_login").serialize();return $("#konfirmasi").html("<div class='alert alert-info'><i class='icon icon-spinner icon-spin'></i> Checking...</div>"),$.ajax({type:"POST",data:a,url:base_url+"adm/act_login",success:function(a){0==a.log.status?$("#konfirmasi").html("<div class='alert alert-danger'>"+a.log.keterangan+"</div>"):($("#konfirmasi").html("<div class='alert alert-success'>"+a.log.keterangan+"</div>"),window.location.assign(base_url+"adm"))}}),!1}function konfirmasi_token(a){var t=$("#_token").val(),n=$("#token").val();return t!=n?(alert("Token salah..!"),!1):(alert("Token benar..!"),void window.location.assign(base_url+"adm/ikut_ujian/_/"+a))}function m_soal_h(a){return confirm("Anda yakin..?")&&$.ajax({type:"GET",url:base_url+"adm/m_soal/hapus/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_soal"):console.log("gagal")}}),!1}function m_ujian_e(a){return $("#m_ujian").modal("show"),$.ajax({type:"GET",url:base_url+"adm/m_ujian/det/"+a,success:function(a){$("#id").val(a.id),$("#nama_ujian").val(a.nama_ujian),$("#mapel").val(a.id_mapel),$("#jumlah_soal").val(a.jumlah_soal),$("#waktu").val(a.waktu),$("#terlambat").val(a.terlambat),$("#tgl_mulai").val(a.tgl_mulai),$("#wkt_mulai").val(a.wkt_mulai),$("#acak").val(a.jenis),$("#nama_ujian").focus(),__ambil_jumlah_soal(a.id_mapel)}}),!1}function m_ujian_s(){var a=$("#f_ujian"),t=getFormData(a);return t.jumlah_soal>t.jumlah_soal1?alert("Jumlah soal pada mata pelajaran ini belum mencukupi..!"):$.ajax({type:"POST",url:base_url+"adm/m_ujian/simpan",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_ujian"):console.log("gagal")}),!1}function m_ujian_h(a){return confirm("Anda yakin..?")&&$.ajax({type:"GET",url:base_url+"adm/m_ujian/hapus/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_ujian"):console.log("gagal")}}),!1}function refresh_token(a){return $.ajax({type:"GET",url:base_url+"adm/m_ujian/refresh_token/"+a,success:function(a){"ok"==a.status?pagination("datatabel",base_url+"adm/m_ujian/data",[]):console.log("gagal")}}),!1}function m_siswa_e(a){return $("#m_siswa").modal("show"),$.ajax({type:"GET",url:base_url+"adm/m_siswa/det/"+a,success:function(a){$("#id").val(a.id),$("#nama").val(a.nama),$("#nim").val(a.nim),$("#jurusan").val(a.jurusan),$("#nama").focus()}}),!1}function m_siswa_s(){var a=$("#f_siswa"),t=getFormData(a);return $.ajax({type:"POST",url:base_url+"adm/m_siswa/simpan",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_siswa"):console.log("gagal")}),!1}function m_siswa_h(a){return confirm("Anda yakin..?")&&$.ajax({type:"GET",url:base_url+"adm/m_siswa/hapus/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_siswa"):console.log("gagal")}}),!1}function m_siswa_u(a){return confirm("Anda yakin..? Username dan Password otomatis adalah NIM ..!")&&$.ajax({type:"GET",url:base_url+"adm/m_siswa/user/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_siswa"):alert(a.caption)}}),!1}function m_siswa_ur(a){return confirm("Anda yakin..? Username dan Password otomatis adalah NIM ..!")&&$.ajax({type:"GET",url:base_url+"adm/m_siswa/user_reset/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_siswa"):alert(a.caption)}}),!1}function m_guru_e(a){return $("#m_guru").modal("show"),$.ajax({type:"GET",url:base_url+"adm/m_guru/det/"+a,success:function(a){$("#id").val(a.id),$("#nip").val(a.nip),$("#nama").val(a.nama),$("#nama").focus()}}),!1}function m_guru_s(){var a=$("#f_guru"),t=getFormData(a);return $.ajax({type:"POST",url:base_url+"adm/m_guru/simpan",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_guru"):console.log("gagal")}),!1}function m_guru_h(a){return confirm("Anda yakin..?")&&$.ajax({type:"GET",url:base_url+"adm/m_guru/hapus/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_guru"):console.log("gagal")}}),!1}function m_guru_u(a){return confirm("Anda yakin..? Username dan Password otomatis adalah NIP")&&$.ajax({type:"GET",url:base_url+"adm/m_guru/user/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_guru"):alert(a.caption)}}),!1}function m_guru_ur(a){return confirm("Anda yakin..? Username dan Password otomatis adalah NIP ..!")&&$.ajax({type:"GET",url:base_url+"adm/m_guru/user_reset/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_guru"):alert(a.caption)}}),!1}function m_guru_matkul(a){return $.ajax({type:"GET",url:base_url+"adm/m_guru/ambil_matkul/"+a,success:function(t){if("ok"==t.status){var n=Object.keys(t.data).length,s='<div class="modal fade" id="m_siswa_matkul" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 id="myModalLabel">Setting Mata Kuliah</h4></div><div class="modal-body"><form name="f_siswa_matkul" id="f_siswa_matkul" method="post" onsubmit="return m_guru_matkul_s();"><input type="hidden" name="id_mhs" id="id_mhs" value="'+a+'"><div id="konfirmasi"></div>';n>0?$.each(t.data,function(a,t){s+="1"==t.ok?'<label><input type="checkbox" value="'+t.id+'" name="id_mapel_'+t.id+'" checked> &nbsp;'+t.nama+"</label> &nbsp;&nbsp; ":'<label><input type="checkbox" value="'+t.id+'" name="id_mapel_'+t.id+'"> &nbsp;'+t.nama+"</label> &nbsp;&nbsp; "}):s+="Belum ada data..",s+='<div class="modal-footer"><button class="btn btn-primary" type="submit">Simpan</button><button class="btn" data-dismiss="modal" aria-hidden="true">Tutup</button></div></form></div></div></div>',$("#tampilkan_modal").html(s),$("#m_siswa_matkul").modal("show")}else console.log("gagal")}}),!1}function m_guru_matkul_s(){var a=$("#f_siswa_matkul"),t=getFormData(a);return $.ajax({type:"POST",url:base_url+"adm/m_guru/simpan_matkul",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_guru"):console.log("gagal")}),!1}function m_mapel_e(a){return $("#m_mapel").modal("show"),$.ajax({type:"GET",url:base_url+"adm/m_mapel/det/"+a,success:function(a){$("#id").val(a.id),$("#nama").val(a.nama),$("#nama").focus()}}),!1}function m_mapel_s(){var a=$("#f_mapel"),t=getFormData(a);return $.ajax({type:"POST",url:base_url+"adm/m_mapel/simpan",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_mapel"):console.log("gagal")}),!1}function m_mapel_h(a){return confirm("Anda yakin..?")&&$.ajax({type:"GET",url:base_url+"adm/m_mapel/hapus/"+a,success:function(a){"ok"==a.status?window.location.assign(base_url+"adm/m_mapel"):console.log("gagal")}}),!1}function __ambil_jumlah_soal(a){return $.ajax({type:"GET",url:base_url+"adm/m_ujian/jumlah_soal/"+a,success:function(a){$("#jumlah_soal1").val(a.jumlah)}}),!1}function rubah_password(){return $.ajax({type:"GET",url:base_url+"adm/rubah_password/",success:function(a){var t='<div class="modal fade" id="m_ubah_password" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 id="myModalLabel">Update password</h4></div><div class="modal-body"><form name="f_ubah_password" id="f_ubah_password" onsubmit="return rubah_password_s();" method="post"><input type="hidden" name="id" id="id" value="'+a.id+'"><div id="konfirmasi"></div><table class="table table-form"><tr><td style="width: 25%">Username</td><td style="width: 75%"><input type="text" class="form-control" name="u1" id="u1" required value="'+a.username+'" readonly></td></tr><tr><td style="width: 25%">Password lama</td><td style="width: 75%"><input type="password" class="form-control" name="p1" id="p1" required></td></tr><tr><td style="width: 25%">Password Baru</td><td style="width: 75%"><input type="password" class="form-control" name="p2" id="p2" required></td></tr><tr><td style="width: 25%">Ulangi Password</td><td style="width: 75%"><input type="password" class="form-control" name="p3" id="p3" required></td></tr></table></div><div class="modal-footer"><button class="btn btn-primary" onclick="return rubah_password_s();"><i class="fa fa-check"></i> Simpan</button><button class="btn" data-dismiss="modal" aria-hidden="true"><i class="fa fa-minus-circle"></i> Tutup</button></div></form></div></div></div>';$("#tampilkan_modal").html(t),$("#m_ubah_password").modal("show"),$("#p1").focus()}}),!1}function rubah_password_s(){var a=$("#f_ubah_password"),t=getFormData(a);return $.ajax({type:"POST",url:base_url+"adm/rubah_password/simpan",data:JSON.stringify(t),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(a){"ok"==a.status?($("#konfirmasi").html('<div class="alert alert-success">'+a.msg+"</div>"),$("#m_ubah_password").modal("hide")):$("#konfirmasi").html('<div class="alert alert-danger">'+a.msg+"</div>")}),!1}$(document).ready(function(){var a=get_url(parseInt(uri_js)),t=get_url(parseInt(uri_js)+1),n=get_url(parseInt(uri_js)+2);"m_siswa"==a?pagination("datatabel",base_url+"adm/m_siswa/data",[]):"m_guru"==a?pagination("datatabel",base_url+"adm/m_guru/data",[]):"m_mapel"==a?pagination("datatabel",base_url+"adm/m_mapel/data",[]):"m_soal"==a?(pagination("datatabel",base_url+"adm/m_soal/data",[]),"edit"==t&&("inline"==editor_style?(CKEDITOR.inline("editornya"),CKEDITOR.inline("editornya_a"),CKEDITOR.inline("editornya_b"),CKEDITOR.inline("editornya_c"),CKEDITOR.inline("editornya_d"),CKEDITOR.inline("editornya_e")):"replace"==editor_style&&(CKEDITOR.replace("editornya"),CKEDITOR.replace("editornya_a"),CKEDITOR.replace("editornya_b"),CKEDITOR.replace("editornya_c"),CKEDITOR.replace("editornya_d"),CKEDITOR.replace("editornya_e")))):"h_ujian"==a?"det"==t?pagination("datatabel",base_url+"adm/h_ujian/data_det/"+n,[]):pagination("datatabel",base_url+"adm/h_ujian/data",[]):"m_ujian"==a?"det"==t?pagination("datatabel",base_url+"adm/m_ujian/data_det/"+n,[]):pagination("datatabel",base_url+"adm/m_ujian/data",[]):"ikut_ujian"==a&&"token"==t&&timer()});
